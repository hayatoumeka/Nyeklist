<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #1e1e1e; color: #dcdcdc; }
        .container { max-width: 100%; margin: 0; padding: 20px; }
        .section { margin-bottom: 15px; }
        .dropdowns { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; }
        .checklist-container { display: flex; flex-direction: column; gap: 3px; }
        .checklist-item { display: flex; align-items: center; gap: 5px; }
        label { font-size: 14px; }
        h4 { margin-bottom: 5px; color: #f0f0f0; }
        button { margin-top: 10px; padding: 5px 10px; background-color: #444; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #666; }
        select { background-color: #333; color: white; border: none; padding: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Checklist</h2>
        
        <div class="dropdowns">
            <div class="section">
                <label for="company">Company:</label>
                <select id="company">
                    <option selected disabled>COMPANY</option>
                    <option value="CITADEL">CITADEL</option>
                    <option value="NORTH VALLEY">NORTH VALLEY</option>
                    <option value="xxxx">xxxx</option>
                </select>
            </div>
            
            <div class="section">
                <label for="ahj">AHJ (State):</label>
                <select id="ahj" onchange="updateFireSetback()">
                    <option selected disabled>AHJ</option>
                    <option value="Fresno">Fresno</option>
                    <option value="Los Angeles">Los Angeles</option>
                    <option value="San Diego">San Diego</option>
                </select>
            </div>
            
            <div class="section">
                <label for="utility">Utility:</label>
                <select id="utility">
                    <option selected disabled>UTILITY</option>
                    <option value="PG&E">PG&E</option>
                    <option value="SCE">SCE</option>
                    <option value="SDG&E">SDG&E</option>
                </select>
            </div>
        </div>
        
        <div class="section">
            <h3>Checklist</h3>
            <form id="checklist-form">
                <div id="checklist" class="checklist-container"></div>
                <button type="button" onclick="resetChecklist()">Reset</button>
            </form>
        </div>
    </div>

    <script>
        let checklistItems = {
            "MODEL SPACE": [
                "FILL OUT DWG PROPS UTC", "AZIMUTH UTC", "DRAW HOUSE", "PROPERTY LINE",
                "FENCE", "DRIVEWAY", "PROPERTY DIMENSION", "FIRE SETBACKS", "RAFTERS", "MODULES",
                "ATTACHMENTS", "USE COUNT ATTACHMENTS UTC", "EQUIPMENT ICONS", "CONDUIT", "AHJ NOTES"
            ],
            "PV0": ["SELECT CORRECT PROJECT DATA DROPDOWN UTC", "AHJ NOTES"],
            "PV1": ["UPDATE SITE NOTES", "BLOWUP VIEW", "AHJ NOTES"],
            "PV2": ["LEGEND", "ROOF CALLOUT", "AHJ NOTES"],
            "PVA": ["ADD NO DWELLING WINDOWS AND DOORS NOTE IF NEEDED"],
            "PV3": ["ATTACH THE CORRECT ATTACHMENT DWG", "AHJ NOTES"],
            "PV4": ["WIRE TABLE", "GROUNDING LABEL", "AHJ NOTES"],
            "PV5": ["LABEL 10", "LABEL 13", "AHJ NOTES"],
            "POST CAD": ["UPDATE SHEET NAME", "AHJ NOTES", "SPEC SHEETS"]
        };

        function generateChecklist() {
            const checklistContainer = document.getElementById('checklist');
            checklistContainer.innerHTML = '';

            for (const [section, items] of Object.entries(checklistItems)) {
                const sectionTitle = document.createElement('h4');
                sectionTitle.textContent = section;
                checklistContainer.appendChild(sectionTitle);

                items.forEach((item, index) => {
                    const label = document.createElement('label');
                    label.classList.add('checklist-item');

                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.name = item;

                    label.appendChild(checkbox);
                    label.appendChild(document.createTextNode(item));

                    // Insert a placeholder for fire setbacks in "MODEL SPACE"
                    if (section === "MODEL SPACE" && item === "CONDUIT") {
                        const fireSetbackItem = document.createElement('label');
                        fireSetbackItem.classList.add('checklist-item');
                        fireSetbackItem.id = "fire-setback"; // ID for updating dynamically
                        fireSetbackItem.appendChild(document.createTextNode(""));
                        checklistContainer.appendChild(fireSetbackItem);
                    }

                    checklistContainer.appendChild(label);
                });
            }
        }

        function updateFireSetback() {
            const ahjSelected = document.getElementById("ahj").value;
            
            fetch("data.json")
                .then(response => response.json())
                .then(data => {
                    const fireSetbackMessage = data[ahjSelected]?.fire_setbacks || "";

                    // Update the dynamically added fire setback field
                    const fireSetbackElement = document.getElementById("fire-setback");
                    if (fireSetbackElement) {
                        fireSetbackElement.textContent = fireSetbackMessage;
                    }
                })
                .catch(error => console.error("Error loading JSON:", error));
        }

        function resetChecklist() {
            document.getElementById('checklist-form').reset();
        }

        window.onload = generateChecklist;
    </script>
</body>
</html>
